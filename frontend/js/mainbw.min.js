"use strict";function _slicedToArray(e,a){return _arrayWithHoles(e)||_iterableToArrayLimit(e,a)||_unsupportedIterableToArray(e,a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,a){if(e){if("string"==typeof e)return _arrayLikeToArray(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,a):void 0}}function _arrayLikeToArray(e,a){(null==a||a>e.length)&&(a=e.length);for(var r=0,t=new Array(a);r<a;r++)t[r]=e[r];return t}function _iterableToArrayLimit(e,a){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,i,n=[],c=!0,s=!1;try{for(r=r.call(e);!(c=(t=r.next()).done)&&(n.push(t.value),!a||n.length!==a);c=!0);}catch(e){s=!0,i=e}finally{try{c||null==r.return||r.return()}finally{if(s)throw i}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperty(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}var STRAPI_BASE_URL="https://devatelier.wall.black",axiosbw=axios.create({baseURL:STRAPI_BASE_URL}),getFabricTypes=function(){return axiosbw.get("fabric-types").then(function(e){return e.data})},getFabrics=function(){return axiosbw.get("fabrics").then(function(e){return e.data})},getProductTypes=function(){return axiosbw.get("product-types").then(function(e){return e.data})},getCases=function(){return axiosbw.get("cases").then(function(e){return e.data})},ImageAdapter=function(e){return e?{id:e.id,altText:e.alternativeText,url:e.url?STRAPI_BASE_URL+e.url:null}:null},FabricAdapter=function(e){var a;if(!e)return null;var r=FabricTypeAdapter(e.fabric_type);return{id:e.id,label:e.label,description:e.description,info:e.info,mainImage:ImageAdapter(e.main_image),mainImageUrl:null===(a=ImageAdapter(e.main_image))||void 0===a?void 0:a.url,shades:e.shades?e.shades.map(ImageAdapter):[],fabricType:r,fabricTypeId:null==r?void 0:r.id,fabricTypeLabel:null==r?void 0:r.label,productTypes:e.product_types?e.product_types.map(CaseAdapter):[],cases:e.cases?e.cases.map(CaseAdapter):[]}},FabricTypeAdapter=function(e){return e?{id:e.id,label:e.label,fabrics:e.fabrics?e.fabrics.map(FabricAdapter):[]}:null},ProductTypeAdapter=function(e){var a,r;return e?(_defineProperty(r={id:e.id,label:e.label,description:e.description,info:e.info,fabrics:e.fabrics?e.fabrics.map(FabricAdapter):[],mainImage:ImageAdapter(e.main_image),mainImageUrl:null===(a=ImageAdapter(e.main_image))||void 0===a?void 0:a.url,images:e.images?e.images.map(ImageAdapter):[]},"fabrics",e.fabrics?e.fabrics.map(FabricAdapter):[]),_defineProperty(r,"cases",e.cases?e.cases.map(CaseAdapter):[]),r):null},CaseAdapter=function(e){var a,r;if(!e)return null;var t=ProductTypeAdapter(e.product_type);return _defineProperty(r={id:e.id,label:e.label,description:e.description,info:e.info,fabrics:e.fabrics?e.fabrics.map(FabricAdapter):[],mainImage:ImageAdapter(e.main_image),mainImageUrl:null===(a=ImageAdapter(e.main_image))||void 0===a?void 0:a.url,images:e.images?e.images.map(ImageAdapter):[]},"fabrics",e.fabrics?e.fabrics.map(FabricAdapter):[]),_defineProperty(r,"productType",t),_defineProperty(r,"productTypeId",null==t?void 0:t.id),_defineProperty(r,"productTypeLabel",null==t?void 0:t.label),r},accKeyDefault="unique_acc_42",app=new Vue({el:"#app",data:{fabricTypesRaw:[],fabricsRaw:[],productTypesRaw:[],casesRaw:[],dataLoaded:!1,selectedFabricsTabId:accKeyDefault,selectedFabric:null,selectedProductTypeForModal:null,selectedProductTypeTabId:accKeyDefault},computed:{fabricTypes:function(){return this.fabricTypesRaw.map(FabricTypeAdapter)},fabrics:function(){return this.fabricsRaw.map(FabricAdapter)},productTypes:function(){return this.productTypesRaw.map(ProductTypeAdapter)},cases:function(){return this.casesRaw.map(CaseAdapter)},fabricTypesMap:function(){return this.getMapByKey({arr:this.fabrics,accLabel:"Все ткани",groupKey:"fabricTypeId",labelKey:"fabricTypeLabel"})},fabricTypesTabs:function(){var e=this;return Object.keys(this.fabricTypesMap).map(function(a){return{id:e.fabricTypesMap[a].id,label:e.fabricTypesMap[a].label}})},selectedFabricsTab:function(){return this.fabricTypesMap[this.selectedFabricsTabId]},selectedFabricsTabList:function(){var e;return(null===(e=this.selectedFabricsTab)||void 0===e?void 0:e.list)||[]},casesByProductTypeMap:function(){return this.getMapByKey({arr:this.cases,accLabel:"Вся продукция",groupKey:"productTypeId",labelKey:"productTypeLabel"})},productTypesTabs:function(){var e=this;return Object.keys(this.casesByProductTypeMap).map(function(a){return{id:e.casesByProductTypeMap[a].id,label:e.casesByProductTypeMap[a].label}})},selectedProductTypeCases:function(){var e,a;return this.selectedProductTypeForModal&&(null===(e=this.casesByProductTypeMap[null===(a=this.selectedProductTypeForModal)||void 0===a?void 0:a.id])||void 0===e?void 0:e.list)||[]},selectedProductTypeTab:function(){return this.casesByProductTypeMap[this.selectedProductTypeTabId]},selectedProductTypeTabList:function(){var e;return(null===(e=this.selectedProductTypeTab)||void 0===e?void 0:e.list)||[]}},created:function(){var e=this;try{Promise.all([getFabricTypes(),getFabrics(),getProductTypes(),getCases()]).then(function(a){var r=_slicedToArray(a,4),t=r[0],i=r[1],n=r[2],c=r[3];e.fabricTypesRaw=t,e.fabricsRaw=i,e.productTypesRaw=n,e.casesRaw=c,e.dataLoaded=!0})}catch(e){console.error(e)}},mounted:function(){},watch:{dataLoaded:{immediate:!0,handler:function(e){e&&this.initSliders()}},selectedFabricsTabId:function(e){this.dataLoaded&&e&&this.initSliders()},selectedProductTypeTabId:function(e){this.dataLoaded&&e&&this.initSliders()}},methods:{initSliders:function(e){function a(){return e.apply(this,arguments)}return a.toString=function(){return e.toString()},a}(function(){this.$nextTick(function(){$(document).ready(function(){initSliders()})})}),getMapByKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{accKey:accKeyDefault},a=e.arr,r=e.accLabel,t=e.groupKey,i=e.labelKey,n=e.accKey,c=void 0===n?accKeyDefault:n;return a.reduce(function(e,a){return e[a[t]]||(e[a[t]]={id:a[t],label:a[i],list:[]}),e[a[t]].list.push(a),e},_defineProperty({},c,{id:c,label:r,list:a}))},handleProdModalClose:function(){this.selectedFabric=null,this.selectedProductType=null}}});